# Performance #

**You should not* generate images on the fly**, specially not on high traffic sites, it might get your server locked up because of the amount of simultaneous requests.

The first request will hit your server and start generating the image while others try to do that at the same time, causing the site become locked up in the worst case.

It's better to generate the needed versions after an image was uploaded and if other versions are needed later, generate them by a shell script.

For this purpose there is a method in the ImagineBehavior that will turn the image operation array into a string, see ```ImagineBehavior::paramsAsFilestring()```;

Suffix your image with the string generated by this method to be able to batch delete a file that has versions of it cached. The intended usage of this is to store the files as my_horse.thumbnail+width-100-height+100.jpg for example.

So after upload store your image meta data in a db, give the filename the id of the record and suffix it with this string and store the string also in the db. In the views, if no further control over the image access is needed, you can simply link the image like `$this->Html->image('/images/05/04/61/my_horse.thumbnail+width-100-height+100.jpg');` directly.
